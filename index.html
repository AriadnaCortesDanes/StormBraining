<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<link href="https://fonts.googleapis.com/css?family=Montserrat:300,400,600|Open+Sans" rel="stylesheet"> 
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css">
	<link rel="stylesheet" href="estilos.css">
    <title>BanBanDis</title>
</head>
<body>
	<div id= "container" class="contenedor">
		<img id="logo" src="logo.png">
        <button id="btn-abrir-popup" class="btn-abrir-popup">
            <span class = "button__text"> How to play? </span>
            <span class = "button__icon">
                <ion-icon name="help-circle-outline"></ion-icon>
            </span> 
    
        </button>
			<!--
            <p>
				Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce bibendum, tortor ut commodo elementum, felis dui pharetra arcu, id vulputate neque orci ut velit. Vestibulum facilisis mauris sapien, ut rutrum lacus sollicitudin eu. Curabitur odio ligula, eleifend sodales nisl et, feugiat mattis sapien. Nulla commodo gravida est a lacinia. Fusce cursus eleifend dui at tincidunt. Aliquam eu metus odio. Morbi metus erat, mattis sit amet ultricies ullamcorper, dignissim nec ante. Nulla congue purus quis interdum tincidunt. Nam at libero leo. Nunc dignissim auctor turpis sit amet ornare. Duis vulputate faucibus sem id dignissim. Vivamus sed orci odio. Maecenas nec dapibus mauris. Pellentesque a massa et lectus volutpat gravida eget id neque.
			</p>
			<p>
				Nunc eleifend venenatis est vel finibus. Mauris vel arcu sit amet risus vulputate gravida a pulvinar felis. In nulla turpis, dignissim ac orci sit amet, suscipit luctus eros. Ut luctus blandit mi. Donec lacinia vehicula fringilla. Vivamus nec ligula ut dui vestibulum iaculis. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Cras ac sem in mi pulvinar eleifend vitae in sapien. Mauris vel dui nibh. Maecenas fermentum ante cursus nisi tincidunt mattis. Phasellus quis sapien sollicitudin, tempor diam nec, ullamcorper sapien.
			</p>
			<p>
				Fusce tempor arcu nec ante congue, nec tempor ipsum eleifend. Pellentesque consequat ac ipsum et euismod. Donec posuere massa in felis scelerisque feugiat. Mauris id arcu enim. Curabitur pulvinar elit nec turpis mollis tincidunt. Curabitur lectus elit, scelerisque nec facilisis ac, semper vel libero. Pellentesque efficitur velit nunc, eu vehicula est pretium quis. Nunc urna tellus, tempus vitae eros eget, efficitur molestie lorem. Phasellus ut facilisis libero. Mauris laoreet libero diam, a tempor risus pharetra eget. Mauris nibh urna, accumsan vel accumsan euismod, lobortis nec lectus. Mauris elementum urna vel feugiat ultrices. Nulla sodales nisl sit amet ante fermentum, sit amet porttitor diam sollicitudin. Pellentesque ut pellentesque turpis. In rutrum augue dui, vel molestie ipsum pulvinar facilisis.
			</p>
            -->
		
	</div>

    <!-- codi de logica del joc-->
    <button id= "Recarga" class="options">
        <img id="recarga" src="https://icons-for-free.com/download-icon-refresh+reload+update+icon-1320191166843452904_256.png"
        width = "120" height = "120">
    </button>
    <button id= "Escut" class="options"><img id="escut" src="https://images.emojiterra.com/google/android-11/512px/1f6e1.png"
        width = "120" height = "120">
    </button>
    <button id= "Dispara" class="options"><img id="dispara" src="https://images.vexels.com/media/users/3/158137/isolated/preview/9c38dddc84fdc68a27ca10230595f183-icono-detallado-de-revolver.png"
        width = "120" height = "120">
    </button>
    <button id= "Vidas" class="options"><img id="vidas" src="https://www.heypoorplayer.com/wp-content/uploads/2014/06/heart-e1403272720870.png"
        width = "120" height = "120">
    </button>
    
    </button>
    <button id="BotResponse" class="buttonResult">
        <img id="botresponse" src="https://www.heypoorplayer.com/wp-content/uploads/2014/06/heart-e1403272720870.png"
        width = "120" height = "120">
        <span class = "button__text2"> BOT </span>
    </button>


        <h2>
            MyName:
        </h2>
        <p id="afegir_precarga">
                Recarga:
        </p>   
        <p id="afegir_pvidas">
                Vidas: 
        </p>
        <h2>
            Computer:
        </h2>
        <p id="afegir_crecarga">
            Recarga:
        </p>
        <p id="afegir_cvidas">
                Vidas: 
        </p>
        <p id="quefacomputer"></p>


        <div class="overlay" id="overlay">
			<div class="popup" id="popup">
				<a href="#" id="btn-cerrar-popup" class="btn-cerrar-popup"><i class="fas fa-times"></i></a>
				<h3>DAN DAN DISH</h3>
				<h4>How to play?</h4>
				<form action="">
					<div class="contenedor-inputs">
                        <p>
                            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce bibendum, tortor ut commodo elementum, felis dui pharetra arcu, id vulputate neque orci ut velit. Vestibulum facilisis mauris sapien, ut rutrum lacus sollicitudin eu. Curabitur odio ligula, eleifend sodales nisl et, feugiat mattis sapien. Nulla commodo gravida est a lacinia. Fusce cursus eleifend dui at tincidunt. Aliquam eu metus odio. Morbi metus erat, mattis sit amet ultricies ullamcorper, dignissim nec ante. Nulla congue purus quis interdum tincidunt. Nam at libero leo. Nunc dignissim auctor turpis sit amet ornare.
                        </p>
					</div>
                    <button id="btn-start" class="btn-start">
                        <span class = "button__text"> START! </span>
                        <span class = "button__icon">
                            <ion-icon name="checkmark-circle-outline"></ion-icon>
                        </span> 
               
                    </button>
				</form>
			</div>
		</div>
        <script>
            const options = document.querySelectorAll(".options");

            let pRecarga = 0;
            let cRecarga = 0;
            let pVidas = 1;
            let cVidas = 1;

            document.getElementById("afegir_precarga").innerHTML += pRecarga;
            document.getElementById("afegir_crecarga").innerHTML += cRecarga;
            document.getElementById("afegir_pvidas").innerHTML += pVidas;
            document.getElementById("afegir_cvidas").innerHTML += cVidas;

        
            options.forEach((option) => {
              option.addEventListener("click", function () {
                const pInput = this.id;
                
                const cOptions = ["recarga", "escut", "dispara", "vidas"];
                //const cUrls = [, , , ];
                const cInput = cOptions[Math.floor(Math.random() * 4)];
                console.log(cInput);
                console.log(document.getElementById("BotResponse").src);
                document.getElementById("botresponse").src = document.getElementById(cInput).src;

                document.getElementById("quefacomputer").innerHTML = cInput;

                compareInputs(pInput, cInput);
                updateValors();
              });
            });

            function compareInputs(pInput, cInput) {
                const currentMatch = `${pInput} vs ${cInput}`;
                // if (pInput === cInput) {
                   // alert(`${currentMatch} is a Tie`);
                    //return;
                //}

                // si el computer intenta disparar i no te recargas, fa una recarga
                if (cInput === "Dispara" && cRecarga == 0) {
                    cInput = "Recarga";
                }

                // si el jugador decideix recarregar
                if (pInput === "Recarga") {
                    pRecarga++;
                    if (cInput === "Recarga") {
                        cRecarga++;
                    }
                    else if (cInput === "Dispara") {
                        --cRecarga;
                        muerte("p");
                    }
                    else if (cInput === "Vidas") {
                        ++cVidas;
                        updateVidas();
                    }
                    else if (cInput === "Escut") {} // no passa res
                }

                // si el jugador decideix disparar
                else if (pInput === "Disparar") {
                    if (pRecarga === 0 || cInput === "Escut") {}
                    else if (cInput === "Vidas") {
                        --pRecarga;
                    }
                    else if (cInput === "Recarga") {
                        cRecarga++;
                        // si pRecarga > 0
                        --pRecarga;
                        muerte("c");
                    }
                    else if (cInput === "Disparar") {
                        --pRecarga;
                        --cRecarga;
                        muertedos(); // quan es disparen els dos alhora
                    }
                }

                // si el jugador decideix posar escut
                else if (pInput === "Escut") {
                    if (cInput === "Recarga") {
                        ++cRecarga;
                    }
                    else if (cInput === "Disparar") {
                        --cRecarga;
                    }
                    else if (cInput === "Escut") {}
                    else if (cInput === "Vidas") {
                        ++cVidas;
                        updateVidas();
                    }
                }

                else if (pInput === "Vidas") {
                    ++pVidas;
                    updateVidas();
                    if (cInput === "Recarga") {
                        ++cRecarga;
                    }
                    else if (cInput === "Disparar") {
                        --cRecarga;
                    }
                    else if (cInput === "Escut") {}
                    else if (cInput === "Vidas") {
                        ++cVidas;
                    }
                }

                //if (cInput === "Recarga") {
                    //  cRecarga++;
                //}
                
            }

            // actualitza el valor de les recargues
            function updateValors() {
                document.getElementById("afegir_precarga").textContent = "Recarga: "+ pRecarga;
                document.getElementById("afegir_crecarga").textContent = "Recarga: "+ cRecarga;
            }

            // quan algu perd una vida
            function muerte(who) {
                if (who === "p") {
                    --pVidas;
                    updateVidas();
                    if (pVidas === 0) {
                        // RESULTAT: GUANYA COMPUTER
                        fin();
                    }
                }
                else if (who === "c") {
                    --cVidas;
                    updateVidas();
                    if (cVidas === 0) {
                        // RESULTAT: GUANYA PLAYER
                        fin();
                    }
                }
            }

            // quan els dos es disparen
            function muertedos() {
                --pVidas;
                --cVidas;
                updateVidas();
                if (pVidas === 0 && cVidas === 0) {
                    // RESULTAT: EMPATEN PLAYER I COMPUTER
                    fin();
                }
            }

            // actualitza valor de les vides dels jugadors
            function updateVidas() {
                document.getElementById("afegir_pvidas").textContent = "Vidas: "+ pVidas;
                document.getElementById("afegir_cvidas").textContent = "Vidas: "+ cVidas;
            }

            // quan algu perd definitivament la partida (vidas = 0)
            function fin() {
                pRecarga = 0;
                cRecarga = 0;
                updateValors();
                pVidas = 1;
                cVidas = 1;
                updateVidas();
            }
        </script>
    <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
	<script src="popup.js"></script>
</body>
</html>